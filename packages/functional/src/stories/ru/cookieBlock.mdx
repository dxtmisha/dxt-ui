import {Meta} from '@storybook/addon-docs/blocks'

<Meta title='@dxtmisha/functional/ru/Classes/CookieBlock'/>

# –ö–ª–∞—Å—Å CookieBlock

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–º –¥–æ—Å—Ç—É–ø–∞ –∫ cookie –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è cookie –≤–æ –≤—Å—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—è—Å—å —Å –∫–ª–∞—Å—Å–æ–º Cookie –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∫–∞–∫ GDPR.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å cookie** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è cookie –≤–æ –≤—Å—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- **–°–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏** ‚Äî –ø–æ–º–æ–≥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å GDPR, CCPA –∏ –¥—Ä—É–≥–∏–µ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DataStorage –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ cookie
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∞—Å—Å–æ–º Cookie** ‚Äî –∫–ª–∞—Å—Å Cookie –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CookieBlock
- **–ü—Ä–æ—Å—Ç–æ–π API** ‚Äî –≤—Å–µ–≥–æ –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ cookie
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±—Ä–∞—É–∑–µ—Ä–∞–º–∏** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å—Ä–µ–¥–∞—Ö

## –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### `get`

–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ cookie.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `boolean` ‚Äî true –µ—Å–ª–∏ cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, false –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

```javascript
import { CookieBlock } from '@dxtmisha/functional'

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ cookie –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
const isBlocked = CookieBlock.get()
console.log('Cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã:', isBlocked) // false –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

if (isBlocked) {
  console.log('Cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏')
} else {
  console.log('Cookie —Ä–∞–∑—Ä–µ—à–µ–Ω—ã')
}
```

### `set`

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ cookie –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `value: boolean` ‚Äî true –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ cookie, false –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

```javascript
// –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ cookie
CookieBlock.set(true)
console.log('Cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã:', CookieBlock.get()) // true

// –†–∞–∑—Ä–µ—à–∏—Ç—å cookie
CookieBlock.set(false)
console.log('Cookie —Ä–∞–∑—Ä–µ—à–µ–Ω—ã:', CookieBlock.get()) // false

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∞—Å—Å–æ–º Cookie

–ö–ª–∞—Å—Å CookieBlock –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ Cookie –∫–æ–≥–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞:

```javascript
import { Cookie, CookieBlock } from '@dxtmisha/functional'

// –°–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä cookie
const userPrefs = new Cookie('user-preferences')

// –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ cookie —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
CookieBlock.set(false)
userPrefs.set({ theme: 'dark', language: 'ru' })
console.log('–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', userPrefs.get()) // { theme: 'dark', language: 'ru' }

// –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å cookie
CookieBlock.set(true)

// –û–ø–µ—Ä–∞—Ü–∏–∏ Cookie —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã
userPrefs.set({ theme: 'light', language: 'en' }) // –≠—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç cookie
console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', userPrefs.get()) // –í—Å—ë –µ—â—ë { theme: 'dark', language: 'ru' }

// –†–∞–∑—Ä–µ—à–∏—Ç—å cookie —Å–Ω–æ–≤–∞
CookieBlock.set(false)
userPrefs.set({ theme: 'light', language: 'en' }) // –¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
console.log('–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', userPrefs.get()) // { theme: 'light', language: 'en' }
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ cookie –ø–æ GDPR

```javascript
class CookieConsent {
  constructor() {
    this.consentCookie = new Cookie('cookie-consent')
  }

  showConsentBanner() {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–¥–µ–ª–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤—ã–±–æ—Ä
    const consent = this.consentCookie.get()

    if (consent === undefined) {
      // –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ —Ä–µ—à–∏–ª
      this.displayBanner()

      // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å cookie –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ä–µ—à–∏—Ç
      CookieBlock.set(true)

      return 'banner-shown'
    } else {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Ä–µ—à–∏–ª
      CookieBlock.set(!consent.accepted)
      return consent.accepted ? 'cookies-allowed' : 'cookies-blocked'
    }
  }

  acceptCookies() {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç cookie
    this.consentCookie.set({
      accepted: true,
      timestamp: Date.now(),
      version: '1.0'
    }, {
      age: 365 * 24 * 60 * 60 // –ó–∞–ø–æ–º–Ω–∏—Ç—å –Ω–∞ 1 –≥–æ–¥
    })

    // –†–∞–∑—Ä–µ—à–∏—Ç—å cookie
    CookieBlock.set(false)

    this.hideBanner()

    // –¢–µ–ø–µ—Ä—å –¥—Ä—É–≥–∏–µ cookie –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
    this.enableAnalytics()
    this.enableMarketing()
  }

  rejectCookies() {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–µ-–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookie
    this.consentCookie.set({
      accepted: false,
      timestamp: Date.now(),
      version: '1.0'
    }, {
      age: 365 * 24 * 60 * 60
    })

    // –û—Å—Ç–∞–≤–∏—Ç—å cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
    CookieBlock.set(true)

    this.hideBanner()

    // –û—á–∏—Å—Ç–∏—Ç—å –ª—é–±—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–µ-–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookie
    this.clearNonEssentialCookies()
  }

  enableAnalytics() {
    if (!CookieBlock.get()) {
      const analyticsCookie = new Cookie('analytics')
      analyticsCookie.set({ enabled: true, userId: 'anonymous' })
      console.log('–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞')
    }
  }

  enableMarketing() {
    if (!CookieBlock.get()) {
      const marketingCookie = new Cookie('marketing')
      marketingCookie.set({ campaigns: [], lastShown: Date.now() })
      console.log('–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ cookie –≤–∫–ª—é—á–µ–Ω—ã')
    }
  }

  clearNonEssentialCookies() {
    const analytics = new Cookie('analytics')
    const marketing = new Cookie('marketing')

    analytics.remove()
    marketing.remove()

    console.log('–ù–µ-–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookie –æ—á–∏—â–µ–Ω—ã')
  }

  displayBanner() {
    console.log('üç™ –ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ cookie –æ—Ç–æ–±—Ä–∞–∂—ë–Ω')
  }

  hideBanner() {
    console.log('–ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ cookie —Å–∫—Ä—ã—Ç')
  }

  getConsentStatus() {
    return this.consentCookie.get()
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const cookieConsent = new CookieConsent()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const status = cookieConsent.showConsentBanner()
console.log('–°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–∏—è:', status)

// –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if (status === 'banner-shown') {
  // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è cookie –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  setTimeout(() => {
    cookieConsent.acceptCookies()
    console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–Ω—è–ª cookie')
  }, 2000)
}

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
setTimeout(() => {
  const finalStatus = cookieConsent.getConsentStatus()
  console.log('–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ:', finalStatus)
  console.log('Cookie –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã:', CookieBlock.get())
}, 3000)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏

```javascript
class PrivacyManager {
  constructor() {
    this.privacySettings = new Cookie('privacy-settings')
  }

  getPrivacySettings() {
    return this.privacySettings.get({
      essential: true,        // –í—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
      functional: false,      // –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      analytics: false,       // –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      marketing: false        // –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    })
  }

  updatePrivacySettings(settings) {
    this.privacySettings.set(settings, {
      age: 365 * 24 * 60 * 60 // 1 –≥–æ–¥
    })

    // –û–±–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É cookie –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    const shouldBlock = !(settings.functional || settings.analytics || settings.marketing)
    CookieBlock.set(shouldBlock)

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ç–∏–ø–∞–º cookie
    this.applyCookieSettings(settings)
  }

  applyCookieSettings(settings) {
    if (!settings.analytics) {
      const analyticsCookies = ['_ga', '_gtag', 'analytics-data']
      analyticsCookies.forEach(name => {
        const cookie = new Cookie(name)
        cookie.remove()
      })
    }

    if (!settings.marketing) {
      const marketingCookies = ['marketing-data', 'campaign-tracking', 'ad-preferences']
      marketingCookies.forEach(name => {
        const cookie = new Cookie(name)
        cookie.remove()
      })
    }

    if (!settings.functional) {
      const functionalCookies = ['user-preferences', 'ui-state', 'form-data']
      functionalCookies.forEach(name => {
        const cookie = new Cookie(name)
        cookie.remove()
      })
    }
  }

  hasConsentFor(category) {
    const settings = this.getPrivacySettings()
    return settings[category] || false
  }

  showPrivacyCenter() {
    const current = this.getPrivacySettings()

    console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¶–µ–Ω—Ç—Ä–∞ –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏:')
    console.log('–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:', current.essential, '(–≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É—é—Ç—Å—è)')
    console.log('–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:', current.functional, '(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)')
    console.log('–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:', current.analytics, '(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)')
    console.log('–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥:', current.marketing, '(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)')

    return current
  }

  acceptAll() {
    this.updatePrivacySettings({
      essential: true,
      functional: true,
      analytics: true,
      marketing: true
    })
    console.log('–í—Å–µ cookie –ø—Ä–∏–Ω—è—Ç—ã')
  }

  rejectAll() {
    this.updatePrivacySettings({
      essential: true,  // –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookie –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∏—Ç—å
      functional: false,
      analytics: false,
      marketing: false
    })
    console.log('–ù–µ-–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookie –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã')
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const privacyManager = new PrivacyManager()

// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
privacyManager.showPrivacyCenter()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ
console.log('–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞:', privacyManager.hasConsentFor('analytics'))
console.log('–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ä–∞–∑—Ä–µ—à—ë–Ω:', privacyManager.hasConsentFor('marketing'))

// –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
privacyManager.updatePrivacySettings({
  essential: true,
  functional: true,
  analytics: true,
  marketing: false
})

console.log('–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –æ—Ç–∫–ª—é—á—ë–Ω')
console.log('Cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ:', CookieBlock.get())

// –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
// privacyManager.acceptAll()
// privacyManager.rejectAll()
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ cookie –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
class AppInitializer {
  static initializeCookieCompliance() {
    const consent = new Cookie('cookie-consent')
    const consentData = consent.get()

    if (!consentData) {
      // –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å cookie –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ä–µ—à–∏—Ç
      CookieBlock.set(true)
      console.log('–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç - cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è')
      return 'pending-consent'
    } else {
      // –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤—ã–±–æ—Ä
      CookieBlock.set(!consentData.accepted)

      if (consentData.accepted) {
        console.log('–í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - cookie —Ä–∞–∑—Ä–µ—à–µ–Ω—ã')
        return 'cookies-allowed'
      } else {
        console.log('–í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º')
        return 'cookies-blocked'
      }
    }
  }

  static checkCookieStatus() {
    return {
      blocked: CookieBlock.get(),
      hasConsent: new Cookie('cookie-consent').get() !== undefined,
      canSetCookies: !CookieBlock.get()
    }
  }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', () => {
  const initStatus = AppInitializer.initializeCookieCompliance()
  const cookieStatus = AppInitializer.checkCookieStatus()

  console.log('–°—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:', initStatus)
  console.log('–°—Ç–∞—Ç—É—Å cookie:', cookieStatus)

  // –ù–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π UI
  if (initStatus === 'pending-consent') {
    showCookieConsentBanner()
  } else if (initStatus === 'cookies-blocked') {
    showPrivacyFriendlyMessage()
  } else {
    enableFullFeatures()
  }
})

function showCookieConsentBanner() {
  console.log('–ü–æ–∫–∞–∑ –±–∞–Ω–Ω–µ—Ä–∞ —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ cookie...')
}

function showPrivacyFriendlyMessage() {
  console.log('–†–∞–±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ, –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏')
}

function enableFullFeatures() {
  console.log('–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π cookie')
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∑–∞–∫–æ–Ω–∞–º–∏ –æ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏

CookieBlock –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å:
- **GDPR** (–û–±—â–∏–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –ø–æ –∑–∞—â–∏—Ç–µ –¥–∞–Ω–Ω—ã—Ö)
- **CCPA** (–ó–∞–∫–æ–Ω –æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏–∏)
- **ePrivacy Directive** (–î–∏—Ä–µ–∫—Ç–∏–≤–∞ –ï–° –æ cookie)
- **–î—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã –æ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏**

–ö–ª–∞—Å—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Å–Ω–æ–≤—É –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è cookie, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤—ã–±–æ—Ä—ã –∏ —Ä–µ–≥—É–ª—è—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
