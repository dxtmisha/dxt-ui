## Специальные символы

Свойство `special` определяет специальные символы для обозначения мест пользовательского ввода в маске и настройку их расширенного поведения.

**Возможные значения:**

- `string` — одиночный специальный символ (по умолчанию `'*'`)
- `string[]` — массив специальных символов для разных типов групп
- `MaskSpecialList` — объект с расширенной конфигурацией каждого символа

Специальные символы в шаблоне маски обозначают позиции, где пользователь может вводить данные, в отличие от литеральных символов, которые вставляются автоматически.

При использовании простой строки (например, `special="*"`) все места ввода в маске ограничиваются одинаковыми правилами валидации.

Массив символов (например, `special="['*', 'A', '#']"`) позволяет создавать разные типы групп с индивидуальными ограничениями: одна группа для цифр, другая для букв, третья для специальных символов.

Объектная нотация `MaskSpecialList` (см. [детальное описание ниже](#maskspeciallist)) предоставляет максимальную гибкость. Каждый специальный символ настраивается отдельно с возможностью задать значения по умолчанию, резиновые группы переменной длины, символы автоперехода и кастомную валидацию.

Для встроенных типов (`currency`, `number`, `date`, `time`) система автоматически генерирует специальные символы с учётом региональных настроек, игнорируя пользовательское значение `special`.

```html
<!-- Простой специальный символ -->
<Mask mask="***-***" special="*" />

<!-- Несколько типов групп -->
<Mask mask="AA*-###" :special="['A', '*', '#']" />

<!-- Расширенная конфигурация -->
<Mask
  mask="***-***"
  :special="{
    '*': {
      pattern: '\\d',
      view: '_',
      rubber: true,
      minLength: 2,
      maxLength: 8,
      transitionChar: ' '
    }
  }"
/>

<!-- Группы с значениями по умолчанию -->
<Mask
  mask="DD/MM/YYYY"
  :special="{
    'D': { defaultValue: '01', pattern: '\\d' },
    'M': { defaultValue: '01', pattern: '\\d' },
    'Y': { defaultValue: '2024', pattern: '\\d' }
  }"
/>
```

## MaskSpecialList

`MaskSpecialList` — объект расширенной конфигурации специальных символов маски, где каждый ключ соответствует специальному символу в шаблоне.

### Структура типа

```typescript
type MaskSpecialList = Record<string, MaskSpecialItem>

interface MaskSpecialItem {
  /** Значение по умолчанию для группы */
  defaultValue?: string

  /** Включает режим переменной длины (резиновая группа) */
  rubber?: boolean

  /** Символы автоматического перехода к следующей группе */
  transitionChar?: string | string[]

  /** Минимальная длина для резиновой группы */
  minLength?: number

  /** Максимальная длина для резиновой группы */
  maxLength?: number

  /** Регулярное выражение для валидации символов */
  match?: RegExp | string

  /** Паттерн валидации группы */
  pattern?: FieldPatternItemOrFunction

  /** Отображаемый символ placeholder */
  view?: string
}
```

### Свойства

#### `defaultValue`

Строка с начальным значением для группы. Автоматически подставляется при инициализации или когда пользователь не ввёл данные.

```html
<Mask
  mask="YYYY-MM-DD"
  :special="{
    'Y': { defaultValue: '2024' },
    'M': { defaultValue: '01' },
    'D': { defaultValue: '01' }
  }"
/>
<!-- Результат: 2024-01-01 -->
```

#### `rubber`

Логическое значение, включающее режим резиновой группы с переменной длиной. Позволяет пользователю вводить от `minLength` до `maxLength` символов в одной группе.

```html
<Mask
  mask="***"
  :special="{
    '*': {
      rubber: true,
      minLength: 2,
      maxLength: 8,
      pattern: '\\d'
    }
  }"
/>
<!-- Пользователь может ввести от 2 до 8 цифр -->
```

#### `transitionChar`

Символ или массив символов, при вводе которых резиновая группа завершается и курсор переходит к следующей части маски. Работает только для резиновых групп (`rubber: true`).

```html
<Mask
  mask="Code: ***"
  :special="{
    '*': {
      rubber: true,
      minLength: 2,
      maxLength: 8,
      pattern: '\\d',
      transitionChar: ' '  // Пробел завершает ввод группы
    }
  }"
/>
<!-- При вводе "123 " группа завершится, курсор перейдёт дальше -->
```

#### `minLength`

Минимальное количество символов для резиновой группы. Работает только при `rubber: true`.

```html
<Mask
  mask="***"
  :special="{
    '*': {
      rubber: true,
      minLength: 3,
      maxLength: 10
    }
  }"
/>
```

#### `maxLength`

Максимальное количество символов для резиновой группы. Работает только при `rubber: true`.

```html
<Mask
  mask="Code: ***"
  :special="{
    '*': {
      rubber: true,
      minLength: 4,
      maxLength: 12
    }
  }"
/>
```

#### `match`

Регулярное выражение или строка для валидации вводимых символов в группе.

```html
<Mask
  mask="AA-###"
  :special="{
    'A': { match: /[A-Z]/ },  // Только заглавные буквы
    '#': { match: /\d/ }      // Только цифры
  }"
/>
```

#### `pattern`

Регулярное выражение или строка для валидации символов в текущей группе при вводе. Также может быть функцией, которая динамически возвращает паттерн на основе данных маски.

**Тип:**

```typescript
type FieldPatternItemOrFunction = FieldPatternItem | ((item: FieldMasks) => FieldPatternItem)
type FieldPatternItem = string | Partial<HTMLInputElement>
```

Где `FieldMasks` — объект с информацией о всех группах маски, каждая из которых содержит:
- `group` — ключ группы
- `value` — накопленное значение группы
- `maxLength` — максимальная длина фрагмента
- `full` — флаг заполненности фрагмента
- `end` — флаг конца ввода
- `chars` — массив символов значения

**Примеры:**

```html
<!-- Простой паттерн: только цифры -->
<Mask
  mask="**/**"
  :special="{
    '*': {
      pattern: '\\d'
    }
  }"
/>

<!-- Динамический паттерн: валидация дня месяца -->
<Mask
  mask="DD/MM/YYYY"
  :special="{
    'D': {
      pattern: (masks) => {
        // День должен быть от 01 до 31
        const value = masks['D']?.value || ''
        if (value.length === 0) return '\\d'
        if (value === '0') return '[1-9]'
        if (value === '1' || value === '2') return '\\d'
        if (value === '3') return '[0-1]'
        return '\\d'
      }
    },
    'M': {
      pattern: (masks) => {
        // Месяц должен быть от 01 до 12
        const value = masks['M']?.value || ''
        if (value.length === 0) return '\\d'
        if (value === '0') return '[1-9]'
        if (value === '1') return '[0-2]'
        return '\\d'
      }
    },
    'Y': { pattern: '\\d' }
  }"
/>

<!-- Паттерн с использованием HTMLInputElement свойств -->
<Mask
  mask="***"
  :special="{
    '*': {
      pattern: {
        pattern: '\\d{3}',
        maxLength: 3
      }
    }
  }"
/>
```

#### `view`

Символ, отображаемый в качестве placeholder для незаполненных позиций группы.

```html
<Mask
  mask="*** - ###"
  :special="{
    '*': { view: '_' },  // Отображается как ___ - ###
    '#': { view: '0' }   // Отображается как ___ - 000
  }"
/>
```

### Пример использования

```html
<script setup>
import { ref } from 'vue'

const phoneCode = ref('')
const productCode = ref('')
const dateValue = ref('')
</script>

<template>
  <!-- Телефонный код переменной длины с автозавершением -->
  <Mask
    v-model="phoneCode"
    mask="+* (***) *** ** **"
    :special="{
      '*': {
        rubber: true,
        minLength: 1,
        maxLength: 3,
        pattern: '\\d',
        transitionChar: ' '
      }
    }"
  />

  <!-- Код товара переменной длины -->
  <Mask
    v-model="productCode"
    mask="PRD-***"
    :special="{
      '*': {
        rubber: true,
        minLength: 4,
        maxLength: 10,
        match: /[A-Z0-9]/,
        view: '_'
      }
    }"
  />

  <!-- Дата с значениями по умолчанию -->
  <Mask
    v-model="dateValue"
    mask="DD/MM/YYYY"
    :special="{
      'D': {
        defaultValue: '01',
        pattern: '\\d',
        view: '0'
      },
      'M': {
        defaultValue: '01',
        pattern: '\\d',
        view: '0'
      },
      'Y': {
        defaultValue: '2024',
        pattern: '\\d',
        view: '0'
      }
    }"
  />
</template>
```
