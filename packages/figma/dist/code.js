var m=Object.defineProperty;var d=(s,t,e)=>t in s?m(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var c=(s,t,e)=>d(s,typeof t!="symbol"?t+"":t,e);const g="+)w496um509nu9ue06eu94=vl0efef",l="texts",n=class n{static post(t,e){figma.ui.postMessage({code:this.code,type:t,message:e})}static add(t,e){const i=this.messages.find(r=>r.type===t);i?i.callbackList.push(e):this.messages.push({type:t,callbackList:[e]})}static isCode(t){return this.code===t}static go(t,e){const i=n.messages.find(r=>r.type===t);i&&i.callbackList.forEach(r=>r(e))}};c(n,"messages",[]),c(n,"code",g),c(n,"on",t=>{var i;const e=(i=t.data)==null?void 0:i.pluginMessage;console.log("data",e),e&&n.isCode(e.code)&&n.go(e.type,e.message)}),window!==void 0&&window.addEventListener("message",n.on);let a=n;class o{constructor(t){this.item=t}isDocument(){return this.getType()==="DOCUMENT"}isFrame(){return this.getType()==="FRAME"}isSection(){return this.getType()==="SECTION"}isText(){return this.getType()==="TEXT"}isTextNoValue(){if(this.isText()){const t=this.getText();return!(t===""||t.match(/^[\d., ]+(|[^ ]{1,3})$/))}return!1}get(){return this.item}getType(){if("type"in this.item)return this.item.type}getParent(){var t;if("parent"in this.item)return(t=this.item.parent)!=null?t:void 0}getParentItem(){const t=this.getParent();if(t)return new o(t)}getChildren(){return"children"in this.item?this.item.children:[]}getChildrenItems(){const t=[];for(const e of this.getChildren())t.push(new o(e));return t}getId(){return"id"in this.item?this.item.id:""}getName(){return"name"in this.item?this.item.name:this.getId()}async exportJpg(){return await this.exportItem("JPG")}async exportJson(){return await this.exportItem("JSON_REST_V1")}getText(){return this.isText()?this.item.characters.trim():""}getExportSettings(t){switch(t){case"JPG":case"PNG":case"SVG":case"PDF":case"JSON_REST_V1":return{format:t};default:return t}}async exportItem(t){return"exportAsync"in this.item?await this.item.exportAsync(this.getExportSettings(t)):""}}class f{constructor(t,e=!1){c(this,"items",[]);this.page=t,this.selection=e,this.items=this.initBySelection()}getItemsFrame(){return this.filter(t=>t.isFrame())}getItemsSection(){return this.filter(t=>t.isSection())}getItemsText(){return this.filter(t=>t.isText())}getMainFrames(){const t=this.toMain();return t?t.getChildrenItems().filter(e=>e.isFrame()||e.isSection()):[]}getTexts(){const t=[];return this.filter(i=>i.isTextNoValue()).forEach(i=>{const r=i.getText(),h=t.find(u=>u.text===r);h?h.id.push(i.getId()):t.push({id:[i.getId()],text:r})}),t}initItems(t){const e=[];if("children"in t)for(const i of t.children)e.push(new o(i),...this.initItems(i));return e}initBySelection(){if(this.selection&&"selection"in this.page){const t=[];for(const e of this.page.selection)t.push(...this.initItems(e));return t}return this.initItems(this.page)}filter(t){return this.items.filter(t)}toMain(t=new o(this.page)){const e=t.getParentItem();return e&&!e.isDocument()&&this.toMain(e),t}}const p=()=>{figma.on("selectionchange",()=>{const s=new f(figma.currentPage,!0);a.post(l,{frame:s,texts:s.getTexts()})})};switch(figma.mode){case"inspect":p(),figma.showUI(__html__);break;case"codegen":figma.codegen.on("generate",async()=>[{title:"Test generate",language:"PLAINTEXT",code:"code test"}]);break}
