import {Meta} from '@storybook/addon-docs/blocks'

<Meta title='@dxtmisha/functional/ru/Classes/Api'/>

# Класс Api

Статический класс для обработки HTTP-запросов с расширенными возможностями: кеширование, эмуляция, индикаторы загрузки и автоматическая генерация URL с учётом локали. Предоставляет методы для REST API операций с комплексной обработкой ошибок и ответов.

## Основные возможности

- **HTTP методы** — GET, POST, PUT, DELETE запросы с правильной обработкой
- **Кеширование запросов** — интеллектуальная система кеширования и эмуляции ответов
- **Управление загрузкой** — автоматические индикаторы загрузки с интеграцией класса Loading
. ...

## Методы конфигурации

### `setUrl`

Устанавливает базовый URL API для всех запросов.

**Параметры:**
- `url: string` — базовый путь API

**Возвращает:** `Api` — ссылка на класс для цепочки вызовов

```javascript
// demo code
```

### `setHeaders`

Устанавливает заголовки по умолчанию для всех запросов.

**Параметры:**
- `headers: Record<string, string>` — объект заголовков по умолчанию

**Возвращает:** `Api` — ссылка на класс для цепочки вызовов

```javascript
// demo code
```

## Работа с эмулятором

Класс Api предоставляет мощную систему эмуляции запросов для разработки и тестирования без реального backend сервера.

### `addResponse`

Добавляет эмулированные ответы для перехвата запросов.

**Параметры:**
- `response: ApiResponse | ApiResponse[]` — конфигурация эмулированного ответа

```javascript
// demo code
```

### Конфигурация эмулированного ответа (ApiResponse)

**Свойства ApiResponse:**
- `path: string | RegExp` — путь запроса (строка или регулярное выражение)
- `method: ApiMethod` — HTTP метод ('GET', 'POST', 'PUT', 'DELETE')
- `request?: ApiFetch['request'] | '*any'` — ожидаемые данные запроса
- `response: any | ((request) => any)` — статический ответ или функция генерации
- `disable?: RefOrNormal<boolean>` — отключение эмуляции (может быть ref)
- `isForGlobal?: boolean` — только для глобального кеша
- `lag?: RefOrNormal<boolean>` — имитация медленного соединения (0-2 сек)

```javascript
// demo code
```

### `getResponseList`

Возвращает список всех зарегистрированных эмулированных ответов.

**Возвращает:** `(ApiResponse & Record<string, any>)[]` — массив эмулированных ответов

```javascript
// demo code
```

### Режимы работы эмулятора

#### Global режим (автоматический для GET)
```javascript
// demo code
```

#### DevMode (принудительная эмуляция)
```javascript
// demo code
```

// ... какие то еще описания ...

#### Примеры использования:

```javascript
// demo code
```
