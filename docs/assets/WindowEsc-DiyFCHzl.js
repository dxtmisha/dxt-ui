import{o as l,u as i,n as a,f as n,K as o,w as f,m as u}from"./iframe-BlCC38XJ.js";class c{constructor(t){this.element=t,l(()=>{this.stopEvent(),this.event=void 0})}oldElement;event;goTo(){return this.isElement()&&i()&&(this.updateOldElement(),this.toFocus(),this.startEvent()),this}reset(){return this.oldElement&&"focus"in this.oldElement&&this.oldElement.focus(),this.stopEvent(),this}toggle(t){return t?this.goTo():this.reset(),this}isElement(){return this.getElement()!==void 0}isTab(t){return t.key==="Tab"||t.code==="Tab"||t.keyCode===9}isShift(t){return t.shiftKey}getElement(){return a(this.element)?this.element():n(this.element)}findFirstElement(){const t=this.getElement()?.querySelectorAll("*");if(t){for(const e of t)if("tabIndex"in e&&e.tabIndex>=0)return e}}findLastElement(){const t=this.getElement()?.querySelectorAll("*");if(t)for(let e=t.length-1;e>=0;e--){const s=t[e];if(s&&"tabIndex"in s&&s.tabIndex>=0)return s}}toFocus(){const t=this.getElement();return t&&(t.setAttribute("tabindex","-1"),t.focus(),requestAnimationFrame(()=>{t.removeAttribute("tabindex")})),this}updateOldElement(){i()&&(this.oldElement=document.activeElement)}listenEvent=t=>{if(!this.isTab(t))return;const e=document.activeElement;e&&(this.isShift(t)?e===this.findFirstElement()&&(this.findLastElement()?.focus(),t.preventDefault()):e===this.findLastElement()&&(this.findFirstElement()?.focus(),t.preventDefault()))};startEvent(){if(this.event){this.event.start();return}this.event=new o(document.body,"keydown",this.listenEvent).start()}stopEvent(){this.event&&this.event.stop()}}class d{constructor(t,e,s=!0){this.open=t,this.on=e,this.active=s,f(t,h=>{u(n(this.active))&&(h?this.start():this.stop())})}event;start(){return this.make(),this.event?.start(),this}stop(){return this.event&&(this.event.stop(),this.event=void 0),this}isEsc(t){return t.key==="Escape"||t.key==="Esc"||t.code==="Escape"||t.code==="Esc"||t.keyCode===27}listener=t=>{this.isEsc(t)&&(t.preventDefault(),t.stopPropagation(),this.on?this.on():this.open.value=!1,this.stop())};make(){i()&&!this.event&&(this.event=new o(document.body,"keydown",this.listener))}}export{c as T,d as W};
