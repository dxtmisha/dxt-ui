import{w as d,r as g,W as z,h as A,l as p,z as f,A as v,c,B as T,D as y,E as D,F as b}from"./iframe-BlCC38XJ.js";import{W as S,w as k,a as w,b as _}from"./wiki-fb_eBW86.js";import"./jsx-runtime-D_zvdyIk.js";class B{constructor(e,t,s){this.props=e,this.refs=t,this.emits=s,d([t.value],()=>this.set(e.value),{immediate:!0})}item=g("");set(e){return this.isDifference(e)?(this.item.value=e??"",!0):!1}on(e){this.set(e.target.value)&&this.emits?.("input",e)}isDifference(e){return this.item.value!==e}}class C{constructor(e,t,s){this.props=e,this.element=t,this.value=s,d(this.value.item,this.on),z().then(()=>requestAnimationFrame(this.on))}clone=g();updateSize=()=>{if(this.isElements()){const e=getComputedStyle(this.element.value),t=this.clone.value.style;t.paddingTop=e.paddingTop,t.paddingRight=e.paddingRight,t.paddingBottom=e.paddingBottom,t.paddingLeft=e.paddingLeft,t.width=`${this.element.value.offsetWidth}px`}};on=()=>{this.updateSize(),this.updateValue()};onInput=e=>{this.value.on(e),this.updateSize(),this.updateValue()};isElements(){return!!(this.props.autosize&&this.element.value&&getComputedStyle(this.element.value).getPropertyValue("--sys-field-sizing-none")==='"--YES--"'&&this.clone.value)}updateValue(){this.isElements()&&(this.clone.value.innerText=`${this.value.item.value} --`,requestAnimationFrame(this.updateHeight))}updateHeight=()=>{this.isElements()&&(this.element.value.style.height=`${this.clone.value.offsetHeight}px`)}}let F=class{constructor(e,t,s,a,u,l,o,r){this.props=e,this.refs=t,this.element=s,this.classDesign=a,this.className=u,this.components=l,this.slots=o,this.emits=r,this.value=new B(e,t,r),this.resize=new C(e,s,this.value)}value;resize};const E={autosize:!0};class V extends A{item;constructor(e,t,s){super(e,t,s),this.item=new F(this.props,this.refs,this.element,this.getDesign(),this.getName(),this.components,this.slots,this.emits),this.init()}initExpose(){return{value:this.item.value.item}}initClasses(){return{main:{},clone:this.getSubClass("clone")}}initStyles(){return{}}initRender(){return[this.renderClone(),this.renderTextarea()]}renderTextarea=()=>p("textarea",{...this.getAttrs(),...this.props.inputAttrs,ref:this.element,value:this.item.value.item.value,class:this.classes?.value.main,onFocus:this.item.resize.on,onInput:this.item.resize.onInput});renderClone=()=>p("div",{ref:this.item.resize.clone,class:this.classes?.value.clone})}const W={height:["xs","sm","md","lg","xl"]},x={...E,height:"md"},m=f({name:"D1TextareaAutosize",__name:"D1TextareaAutosize",props:v({value:{},autosize:{type:Boolean},inputAttrs:{},height:{}},x),emits:["input"],setup(i,{expose:e,emit:t}){const s=t,a=i,u=c(()=>({main:{"d1-textareaAutosize":!0,[`d1-textareaAutosize--height--${a.height}`]:T(W.height,a.height)}})),l=c(()=>({})),o=new V("d1.textareaAutosize",a,{emits:s,classes:u,styles:l}),r=o.render();return e(o.expose()),(I,q)=>(b(),y(D(r)))}});m.__docgenInfo={name:"D1TextareaAutosize",exportName:"default",displayName:"D1TextareaAutosize",description:"",tags:{},props:[{name:"height",required:!1,type:{name:"union",elements:[{name:'"xs"'},{name:'"sm"'},{name:'"md"'},{name:'"lg"'},{name:'"xl"'}]}}],sourceFiles:["/Volumes/T7/Code/dxt-ui/packages/d1/src/components/Ui/TextareaAutosize/D1TextareaAutosize.vue"]};const $=[{name:"autosize",type:"boolean"},{name:"height",type:"string",option:["xs","sm","md","lg","xl"]},{name:"inputAttrs",type:"Record<string, any>"},{name:"value",type:"string"}],h=new S("TextareaAutosize",$,x,k,w,_),N={title:"Ui/TextareaAutosize",component:m,parameters:{design:"d1",docs:{description:{component:h.getDescription()}}},argTypes:h.getWiki(),args:h.getValues()},n={render:i=>({components:{D1TextareaAutosize:m},setup:()=>({args:i}),template:`
      <D1TextareaAutosize v-bind="args" :inputAttrs="{style: 'width: 240px; border: 1px solid #90A1B9FF'}" />
    `})};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  // :story-main [!] System label / Системная метка
  render: (args: any) => ({
    components: {
      D1TextareaAutosize
    },
    setup: () => ({
      args
    }),
    template: \`
      <D1TextareaAutosize v-bind="args" :inputAttrs="{style: 'width: 240px; border: 1px solid #90A1B9FF'}" />
    \`
  })
  // :story-main [!] System label / Системная метка
}`,...n.parameters?.docs?.source}}};const R=["TextareaAutosize"],P=Object.freeze(Object.defineProperty({__proto__:null,TextareaAutosize:n,__namedExportsOrder:R,default:N},Symbol.toStringTag,{value:"Module"}));export{P as T,n as a,h as b};
